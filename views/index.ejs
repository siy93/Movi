<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Movi</title>

	<meta name="description" content="Heera HTML5 Template by Jewel Theme" >

	<meta name="author" content="Jewel Theme">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->

	<!-- Bootstrap  -->
	<link href="assets/css/bootstrap.min.css" rel="stylesheet">

	<!-- icon fonts font Awesome -->
	<link href="assets/css/font-awesome.min.css" rel="stylesheet">

	<!-- Import Magnific Pop Up Styles -->
	<link rel="stylesheet" href="assets/css/magnific-popup.css">

	<!-- Import Custom Styles -->
	<link href="assets/css/style.css" rel="stylesheet">

	<!-- Import Animate Styles -->
	<link href="assets/css/animate.min.css" rel="stylesheet">

	<!-- Import owl.carousel Styles -->
	<link href="assets/css/owl.carousel.css" rel="stylesheet">

	<!-- Import Custom Responsive Styles -->
	<link href="assets/css/responsive.css" rel="stylesheet">


	<link href="http://vjs.zencdn.net/5-unsafe/video-js.css" rel="stylesheet">
	<script src="http://vjs.zencdn.net/5-unsafe/video.js"></script>

	<!--[if IE]>
  		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  		<![endif]-->

  	</head>
  	<body class="header-fixed-top">
			  		<div id="page-top" class="page-top"></div><!-- /.page-top -->

			  		<section id="site-banner" class="site-banner text-center">
			  			<div class="container">
			  				<div class="site-logo">
			  					<a href="/"><img src="images/logo-zs1.png"> </a>
			  				</div><!-- /.site-logo -->
	                <div class="section-login">
											<% if (message) { %>
												<div>
											</div>
												<a href="/logout" class="btn-default">로그아웃</a>
									    <% }else { %>
											  <a href="/login" class="btn-default">로그인</a>
											<% } %>
	                </div>
			  			</div><!-- /.container -->
			  		</section><!-- /#site-banner -->


  		<header id="main-menu" class="main-menu">
  			<div class="container">
  				<div class="row">
  					<div class="col-sm-7">
  						<div class="navbar-header">
  							<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu">
  								<i class="fa fa-bars"></i>
  							</button>
                            <div class="menu-logo">
                              <a href="./"><img src="images/logo-zs2-small.png" alt="menu Logo"></a>
                            </div><!-- /.menu-logo -->
                        </div>
                        <nav id="menu" class="menu collapse navbar-collapse">
                            <ul id="headernavigation" class="menu-list nav navbar-nav">
                                <li><a href="/">잠버릇 자랑</a></li>
                                <li><a href="/open-video">나의 잠버릇</a></li>
                                <li><a href="/graph">어떻게 잤나?</a></li>
                            </ul><!-- /.menu-list -->
                        </nav><!-- /.menu-list -->
                    </div>

          <div class="col-sm-5">
            <div class="menu-search pull-right">
             <form role="search" class="search-form" action="#" method="get">
              <input class="search-field" type="text" name="s" id="s" placeholder="동영상 검색하기" required>
              <button class="btn search-btn" type="submit"><i class="fa fa-search"></i></button>
            </form><!-- /.search-form -->
          </div><!-- /.menu-search -->
        </div>
      </div><!-- /.row -->
    </div><!-- /.container -->
  </header><!-- /#main-menu -->
		<div class="cover-section">
						<div class="cover"></div>
						<div class="mask"></div>
						<div class="wrap">
								<div class="cafe-title">
										<span class="ex">당신의 꿀잠을 위한 수면 전문가 </span>
										<span class="title">
										<img src="images/logo-zs2-small.png">
										</span>
								</div>
						</div>
	</div>


	<div class="container">
	    <div class="section-title">
	        <h2 class="title">잠버릇 자랑</h2>
	    </div>
	    <div class="col-md-12">
	        <div class="today-video">
						<div class="video-id">
                <span class="date"><%=message%></span><span>님의 잠버릇</span>
            </div>
						<a href=/graph?page=<%=message%>><canvas width = "700" height = "500" id = "my_Canvas" ></canvas></a>
	        </div>
	    </div>
			<div class="section-movie">
				<% for(var i=0; i< 3 ; i++) {%>
						<div class = "row">
							<% for(var j=0; j< 3 ; j++) {%>
								<div class="col-md-4 box">
									<div class = inner>
										<%if (totalvideo > 9*(currentPage-1)+1+j+i*3) {%>
											<%= other[9*(currentPage-1)+1+j+i*3] %> 님의 잠버릇
											<a href=/graph?page=<%=other[9*(currentPage-1)+1+j+i*3] %>>
													<img src = "/images/sleeping-0<%=Math.floor((Math.random() * 9) + 1)%>.png">
											</a>
										<% } else { %>
										<span></span>
										<% } %>
									</div>
							</div><% } %>
						</div>
				<% } %>
			</div>
			<div class="section-pagination">
			<% if (pageCount > 1 ) { %>
			<ul class="pagination">
			  <%if (currentPage > 1) { %>
			    <li><a href="/?page=1">이전</a><li>
			  <% } %>
			  <% var i = 1;
			  if(currentPage > 5 ){
			   i = +currentPage - 4;
			  } %>
			 <% if (i !== 1) { %>
			    <li class = "disabled"><a href = "#">...</a><li>
			 <% } %>
			 <% for (i;i<=pageCount; i++){ %>
			   <% if (currentPage == i) {%>
			     <li class="active"><span><%= i %> <span class="sr-only">(current)</span></span></li>
			 <% } else { %>
			     <li><a href="/?page=<%= i %>"><%= i %></a></li>
			 <% } %>
			 <% if (i == (+currentPage + 4)) { %>
			     <li class="disabled"><a href="#">...</a></li>
			 <% break; } %>
			<% } %>
			<% if (currentPage != pageCount) { %>
			   <li><a href="/?page=<%= pageCount %>">다음</a></li>
			<% } %>
			</ul>
			<% } %>
			</div>
	</div>




<footer>

  <div id="footer-bottom" class="footer-bottom text-center">
    <div class="container">
      <div id="copyright" class="copyright">
        &copy; <a href="/">Movi</a> 2016 All rights reserved &amp; Designed by <a href="/">Movi Team</a>
      </div><!-- /#copyright -->
    </div>
  </div><!-- /#footer-bottom -->
</footer>



<div id="scroll-to-top" class="scroll-to-top">
  <span>
    <i class="fa fa-chevron-up"></i>
  </span>
</div><!-- /#scroll-to-top -->



<!-- Include modernizr-2.8.3.min.js -->
<script src="assets/js/modernizr-2.8.3.min.js"></script>

<!-- Include jquery.min.js plugin -->
<script src="assets/js/jquery-2.1.0.min.js"></script>

<!-- Include magnific-popup.min.js -->
<script src="assets/js/jquery.magnific-popup.min.js"></script>

<!-- Google Maps Script -->
<script src="http://maps.google.com/maps/api/js?sensor=true"></script>

<!-- Gmap3.js For Static Maps -->
<script src="assets/js/gmap3.js"></script>

<!-- Javascript Plugins  -->
<script src="assets/js/plugins.js"></script>

<!-- Custom Functions  -->
<script src="assets/js/functions.js"></script>

<script src="assets/js/wow.min.js"></script>

<script type="text/javascript" src="assets/js/jquery.ajaxchimp.min.js"></script>

<script type="text/javascript">
  // Once the video is ready
  _V_("example_video_1").ready(function(){

    var myPlayer = this;    // Store the video object
    var aspectRatio = 9/16; // Make up an aspect ratio

    function resizeVideoJS(){
      // Get the parent element's actual width
      var width = document.getElementById(myPlayer.id).parentElement.offsetWidth;
      // Set width to fill parent element, Set height
      myPlayer.width(width).height( width * aspectRatio );
    }

    resizeVideoJS(); // Initialize the function
    window.onresize = resizeVideoJS; // Call the function on resize
  });
</script>
<script>
		<!-- Compiled and minified JavaScript -->
		/*======= Creating a canvas =========*/
		var timeSpent = 0,i=0;
		var canvas = document.getElementById('my_Canvas');
		var gl = canvas.getContext('experimental-webgl');
		var scene = this.scene;

		var vertices = [<%= data %>]

		function render() {
					 timeSpent += 1.0 / 60.0;

						i +=38;

						gl.clearColor(0.0, 0.0, 0.0, 0.0);
						gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
						//gl.drawArrays(gl.POINTS, i, 38);
						gl.drawArrays(gl.LINES, i, 38);
						gl.drawArrays(gl.POINTS,i,38);
				 }

				 function renderLoop() {
						if(i >= vertices.length){i=0}
						render();
						window.setTimeout(renderLoop, 2000 / 60);
				 }

		// Create an empty buffer object
		var vertex_buffer = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
		gl.bindBuffer(gl.ARRAY_BUFFER, null);

		/*=================== Shaders ====================*/

		var vertCode =
			 'attribute vec3 coordinates;' +
			 'void main(void) {' +
					' gl_Position = vec4(coordinates, 1.0);' +
					'gl_PointSize = 10.0;'+
			 '}';

		var vertShader = gl.createShader(gl.VERTEX_SHADER);
		gl.shaderSource(vertShader, vertCode);
		gl.compileShader(vertShader);
		var fragCode =
			 'void main(void) {' +
					'gl_FragColor = vec4(0.0, 0.0, 0.0, 1);' +
			 '}';

		var fragShader = gl.createShader(gl.FRAGMENT_SHADER);
		gl.shaderSource(fragShader, fragCode);
		gl.compileShader(fragShader);
		var shaderProgram = gl.createProgram();
		gl.attachShader(shaderProgram, vertShader);
		gl.attachShader(shaderProgram, fragShader);
		gl.linkProgram(shaderProgram);
		gl.useProgram(shaderProgram);

		/*======= Associating shaders to buffer objects ======*/
		gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);
		var coord = gl.getAttribLocation(shaderProgram, "coordinates");
		gl.vertexAttribPointer(coord, 2, gl.FLOAT, false, 0, 0);
		gl.enableVertexAttribArray(coord);

		/*============ Drawing the triangle =============*/
		gl.clearColor(0.5, 0.5, 0.5, 0.9);
		gl.enable(gl.DEPTH_TEST);
		gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
		gl.viewport(0,0,canvas.width,canvas.height);
		renderLoop();





</script>

</body>
</html>
